\chapter{Microservice Architecture als Pattern der Zukunft?}

Die Frage, ob Microservice Architecture im Betrieb eingesetzt werden sollte, lässt sich pauschal schlichtweg nicht beantworten. Die Voraussetzungen um erfolgreich zu einer Microservice Architecture zu wechseln, sind individuell und vor Allem von der bestehenden Anwendung und den Teamgegebenheiten abhängig. Microservices können dabei Helfen viele Probleme des klassischen Monolithen, insbesondere eine große, unübersichtliche Codebase, Performance Probleme, hohe Kosten und unklare Strukturen, zu lösen. Jedoch setzt der Einsatz vieles Voraus, dessen Aufbau ein langwieriger Prozess sein kann. Eine Teamstruktur, in denen sich Entwickler selbst für den Betrieb der von ihnen entwickelten Anwendung verantwortlich sehen, dynamische Serverstrukturen  zum skalieren der Services wie sie z.B. AWS, Google BLA und Heroku bieten, automatisierte deploys und ausgereifte Monitoring Lösungen sind für den erfolgreichen und sinnvollen Einsatz von Microservices unabdingbar.

Sollten Microservices nicht direkt zu Beginn des Softwarelebenszyklus(es?) entstehen, ist es wichtig den Übergang so kontrolliert wie möglich zu schaffen. Die Microservice Architecture stellt sicherlich keine schnelle Lösung für Probleme im Betrieb dar. Stattdessen ist sie eine längerfristige Strategie um die Organisation und Arbeit in der Firma zu verbessern. Wird eine bestehende Anwendung zu einer Microservice Architektur umgewandelt, so bietet es sich zum Beispiel an, neu entstehende Software Teile als Microservices zu entwickeln, um so die Codebase nicht noch weiter wachsen zu lassen. Auch besteht die Möglichkeit einen neuen Service zunächst an den bestehenden Hauptservice zu koppeln. Das ``große'' Framework Ruby on Rails bietet so z.B. die Möglichkeit, mit dem Microframework Sinatra entwickelte Apps in der Hauptanwendung zu ``mounten''. Hierdurch erhält die Subanwendung einen relativen Pfad in der Hauptanwendung und kann so wie über interne Routen angesprochen werden. Die Subanwendung kann dann mit der Hauptanwendung deployt und betrieben werden. Hierdurch können viele der initialen Herausforderungen von Microservices, wie das Monitoring, der separate Betrierb und die dynamische Skalierung der Anwendung, umgangen werden, jedoch einige der Vorzüge, wie separate Codebases und klare Strukturen bereits genutzt werden. Ebenso können hier dann z.B. auch queueing-Dienste wie Sidekiq als Kommunikationsschnittstelle dienen~\footcite[vgl.][]{sidekiqmessaging}. Nach Aufbau geeigneter Firmenstrukturen kann die Anwendung dann leicht zu einem vollwertigen Microservice umgebaut werden. So ist man zeitlich bei der Programmierung eines Microservices nicht an dessen unmittelbaren Betrieb als solcher gebunden.

In der hier entwickelten Anwendung wurde vor allem beim Ersetzen der bestehenden Anwendungsteile durch den Microservice auf eine ruhige/vorsichtige(?) Integration geachtet. Durch Feature toggles wurden zunächst im Betrieb nur bestimmte, explizit gewählte Queries an den Microservice gesendet. Später wurden schrittweise einzelne User freigeschaltet und prozentual, langsam eine immer höhere Zahl an Queries an den Microservice umgelagert. So konnte nach Testen und Sicherstellen der Funktion langsam immer mehr Last auf den Microservice verschoben und so die Chance einer Überlastung und anderer unerwarteter Fehler minimiert.

In der hier umgesetzten praktischen Arbeit kann man den entwickelten Microservice als Erfolg betrachten. Die erhofften Performance Verbesserungen durch die Entwicklung der neuen Teilanwendung konnten erreicht werden. Die Transition, wenn auch noch nicht komplett abgeschlossen, läuft erfolgreich und die Struktur der Anwendung konnte, vor allem in Augen der betroffenen Entwickler, verbessert werden. Lediglich auf der Seite der Kosten konnte keine Verbesserung erzielt werden. Dies liegt vor allem daran, das der bisherige Hosting Plan keinerlei Dynamik vorsieht und so, trotz sinkender Last, zu keiner Kostenreduzierung führt. Die durch den neuen Service entstehenden Mehrkosten sind aber nicht höher als erwartet und somit stellt auch dies kein Problem dar. (Weiterhin bietet der neue Microservice die Möglichkeit Userdaten auch aus anderen Anwendungsteilen auszukoppeln und so die Datenmengen in der Primärdatenbank zu reduzieren. Hierdurch würde eine nicht unerhebliche Kosteneinsparung entstehen.)

Die Ausarbeitung von neuen Monitoring, Logging und Deploy Lösungen wurde im Rahmen der Arbeit erfolgreich umgesetzt und bereits im Betrieb erprobt.

Die vorliegende Arbeit zeigt, das die Integration in ein bestehendes System möglich ist und auf lange Sicht Vorteile hat, jedoch ist sie auf Kurze Sicht mit nicht unerheblichem Mehraufwand verbunden. Ob die in der Entwicklung entstandenen Mehrkosten jedoch über Zeit eingespart werden können (relativ über leichtere Entwicklungsarbeit dank sauberer Codebase oder durch bessere Performance des Systems) muss im konkreten Einzelfall immer vorher evaluiert werden.